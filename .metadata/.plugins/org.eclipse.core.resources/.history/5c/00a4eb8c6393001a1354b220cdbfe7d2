package TC305K;

import java.io.IOException;

import org.testng.Assert;
import cucumber.api.DataTable;
import cucumber.api.java.After;
import cucumber.api.java.Before;
import cucumber.api.java.en.And;
import cucumber.api.java.en.Given;
import cucumber.api.java.en.Then;
import cucumber.api.java.en.When;
import utilPackage.baseclass;

public class TC305 extends baseclass {
	
	public TC305() throws IOException 
	{
		super();
	}
	
	@Before()
	public void setup() throws IOException
	{
		baseclass.initialization();
	}
	
	boolean emp;
	
	@Given("^User should be registered$")
	public void user_should_be_registered() throws Throwable {
	   
	}

	@When("^title of login page is Home$")
	public void title_of_login_page_is_Home() throws Throwable {
		String Title = driver.getTitle();
		Assert.assertEquals(Title, "HireXpert");
	}

	@And("^user enters valid credentials$")
	public void user_enters_valid_credentials() throws InterruptedException   {
//		loginpage.loginInAppWithEmp();
		loginpage.loginInAppWithAgy();
		loginpage.identifyUser();
        this.emp=loginpage.b;
		System.out.println(emp);
	}
	@And("^click on workbench and select job$")
	public void click_on_workbench_and_select_job() throws Throwable {
		workbenchpage.clickOnWorkbenchTab();
		workbenchpage.selectJob();
		
	}
	@And("^Add the task$")
	public void Add_the_task(DataTable credentials) throws Throwable {
		taskpage.clickOnAddTaskBtn();
		if(emp==true)
		{
			taskpage.enterAlldetails(credentials);
		}
		else
		{
			taskpage.enterAlldetailsForAgy(credentials);
		}
		
	}


	@And("^edit the task$")
	public void edit_the_task(DataTable credentials) throws Throwable {
		loginpage.dashboard();
		if(emp==true)
		{
			if(taskpage.assignto.contains("employer"))
			{
				taskpage.mytask.click();
				
				taskpage.ClickOnEditTask();
				taskpage.edittaskdetailsforemp(credentials);
				
			}
			else
			{
				taskpage.teamtask.click();
				taskpage.ClickOnEditTask();
				taskpage.edittaskdetailsforemp(credentials);
			}
		}
		else
		{
			if(taskpage.assignto.contains("agency"))
			{
				taskpage.mytask.click();
				taskpage.ClickOnEditTask();
				taskpage.editTaskDetailsForAgy(credentials);
			}
			else
			{
				Thread.sleep(2000);
				taskpage.teamtask.click();
				taskpage.ClickOnEditTask();
				taskpage.editTaskDetailsForAgy(credentials);
			}
			
		}
		
		
	}

	@Then("^verify all the edited details$")
	public void verify_all_the_edited_details(DataTable credentials) throws Throwable {
	
		taskpage.ClickOnEditTask();
		
		if(emp==true)
		{
			taskpage.assertediteddetails(credentials);
		}
		else
		{
			taskpage.assertediteddetailsForAgy(credentials);
		}
	}
	@After()
	public void tearDown()
	{
		driver.quit();
	}
	

}


